<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>EcoFix ‚Äì Sustainable Repair Solutions</title>
<style>
  :root{--green:#2e7d32;--accent:#43a047;--bg:#f0f8f5;}
  body{font-family:"Poppins",sans-serif;margin:0;background:var(--bg);color:#222;}
  header{display:flex;align-items:center;gap:15px;justify-content:center;background:var(--green);color:#fff;padding:18px;}
  header img{width:60px;height:60px;border-radius:10px;object-fit:cover}
  header h1{margin:0;font-size:1.25rem;}
  .container{max-width:1000px;margin:22px auto;padding:0 18px;}
  .overview{background:#e8f5e9;padding:18px;border-radius:12px;margin-bottom:20px;}
  h2{color:var(--green)}
  .products{display:grid;grid-template-columns:repeat(auto-fit,minmax(230px,1fr));gap:18px;}
  .product{background:#fff;border-radius:12px;padding:12px;box-shadow:0 6px 18px rgba(0,0,0,0.06);text-align:center;transition:transform .18s ease,box-shadow .18s;}
  .product:hover{transform:translateY(-6px);box-shadow:0 14px 30px rgba(0,0,0,0.08);}
  .product img{width:100%;height:170px;object-fit:cover;border-radius:10px}
  .product h3{margin:10px 0 6px;color:#2e7d32}
  .product p{margin:0 0 10px;color:#555;font-size:.95rem}
  .product .price{font-weight:700;color:#111;margin-bottom:8px}
  .btn{background:var(--accent);color:#fff;border:none;padding:10px 14px;border-radius:999px;cursor:pointer;font-weight:600;transition:transform .12s,background .12s}
  .btn:hover{transform:scale(1.03);background:#236127}
  .cart{background:#f6fff6;padding:14px;border-radius:12px;margin-top:20px}
  #cartList{list-style:none;padding:0;margin:0}
  #cartList li{padding:8px 0;border-bottom:1px dashed #ddd;display:flex;justify-content:space-between;align-items:center}
  #cartList li:last-child{border-bottom:none}
  .checkout{background:#eaf7ea;padding:16px;border-radius:12px;margin-top:18px}
  .checkout input,.checkout select{width:100%;padding:10px;border-radius:10px;border:1px solid #d9d9d9;margin-top:8px}
  .contact{background:#e8f5e9;padding:16px;border-radius:12px;margin-top:18px}
  .modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.45);display:none;align-items:center;justify-content:center;z-index:9999}
  .receipt{width:360px;background:#fff;border-radius:12px;padding:18px;box-shadow:0 20px 50px rgba(0,0,0,0.3);}
  .refund-form{display:none;margin-top:10px;padding:10px;background:#fff8e1;border-radius:8px}
  .refund-form input,.refund-form select,.refund-form textarea{width:100%;padding:8px;margin-top:5px;border-radius:8px;border:1px solid #ddd}
  .refund-confirm{background:#dff0d8;color:#2e7d32;padding:8px;border-radius:8px;margin-top:10px;display:none}
  table{width:100%;border-collapse:collapse;margin-top:10px;}
  table,th,td{border:1px solid #ccc;}
  th,td{padding:8px;text-align:left;}
  .chat-fab{position:fixed;right:22px;bottom:22px;width:64px;height:64px;border-radius:18px;background:linear-gradient(180deg,var(--accent),#06b6d4);display:flex;align-items:center;justify-content:center;color:#fff;font-size:22px;cursor:pointer;box-shadow:0 12px 30px rgba(2,6,23,0.4);z-index:999}
  .chat-panel{position:fixed;right:22px;bottom:100px;width:340px;max-height:68vh;background:#fff;border-radius:14px;box-shadow:0 12px 36px rgba(2,6,23,0.35);display:none;flex-direction:column;overflow:hidden;z-index:999}
  .chat-header{padding:12px;border-bottom:1px solid #eee;display:flex;justify-content:space-between;align-items:center;background:linear-gradient(90deg,#f6fff6,#ffffff)}
  .chat-body{padding:12px;flex:1;overflow:auto;display:flex;flex-direction:column;gap:8px;background:#fbfffb}
  .chat-input{display:flex;border-top:1px solid #eee;padding:8px;gap:8px}
  .bubble{display:inline-block;padding:8px 12px;border-radius:12px;max-width:84%}
  .bubble.user{background:var(--accent);color:#fff;align-self:flex-end;border-bottom-right-radius:4px}
  .bubble.ai{background:#f1f1f1;color:#111;align-self:flex-start;border-bottom-left-radius:4px}
</style>
</head>
<body>

<header>
  <img src="logo.png" alt="EcoFix Logo" onerror="this.src='https://via.placeholder.com/80x80?text=EcoFix'">
  <h1>EcoFix ‚Äì Sustainable Repair Solutions</h1>
</header>

<div class="container">
  <div class="overview">
    <h2>Company Overview</h2>
    <p><strong>EcoFix</strong> provides green repair materials like bamboo, coconut fiber, fly ash concrete, and recycled aggregates for sustainable construction.</p>
  </div>

  <h2>Products</h2>
  <div class="products">
    <div class="product" data-name="Bamboo Reinforcement" data-price="250">
      <img src="bamboo.jpg" onerror="this.src='https://via.placeholder.com/400x300?text=Bamboo'">
      <h3>Bamboo Reinforcement</h3>
      <p>Strong, renewable reinforcement for repairs.</p>
      <div class="price">‚Ç±250</div><button class="btn add-to-cart">Add to Cart</button>
    </div>
    <div class="product" data-name="Coconut Fiber Board" data-price="300">
      <img src="coco.jpg" onerror="this.src='https://via.placeholder.com/400x300?text=Coconut'">
      <h3>Coconut Fiber Board</h3>
      <p>Durable and sustainable insulation board.</p>
      <div class="price">‚Ç±300</div><button class="btn add-to-cart">Add to Cart</button>
    </div>
    <div class="product" data-name="Fly Ash Concrete" data-price="220">
      <img src="flyash.jpg" onerror="this.src='https://via.placeholder.com/400x300?text=Fly+Ash'">
      <h3>Fly Ash Concrete</h3>
      <p>Eco-friendly high-performance concrete mix.</p>
      <div class="price">‚Ç±220</div><button class="btn add-to-cart">Add to Cart</button>
    </div>
    <div class="product" data-name="Recycled Aggregates" data-price="180">
      <img src="aggregate.jpg" onerror="this.src='https://via.placeholder.com/400x300?text=Aggregate'">
      <h3>Recycled Aggregates</h3>
      <p>Processed from construction debris for reuse.</p>
      <div class="price">‚Ç±180</div><button class="btn add-to-cart">Add to Cart</button>
    </div>
  </div>

  <div class="cart">
    <h2>Cart</h2><ul id="cartList"></ul><h3 id="cartTotal">Total: ‚Ç±0</h3>
  </div>

  <div class="checkout">
    <h2>Checkout</h2>
    <input id="custName" placeholder="Full name">
    <input id="custAddress" placeholder="Address">
    <select id="custPayment">
      <option value="">Mode of Payment</option>
      <option>Gcash</option><option>Bank</option><option>COD</option>
    </select>
    <div id="paymentDetails"></div>
    <button id="placeOrderBtn" class="btn">Place Order</button>

    <h2>Order History & Tracking</h2>
    <table id="orderHistory">
      <thead>
        <tr><th>Order ID</th><th>Items</th><th>Total</th><th>Payment</th><th>Status</th><th>Action</th></tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <div class="contact">
    <h2>Contact Us</h2>
    <p>Email: support@ecofix.com | Phone: +63 912 345 6789</p>
  </div>
</div>

<!-- Receipt Modal -->
<div class="modal-backdrop" id="receiptModal">
  <div class="receipt">
    <h3>EcoFix Receipt</h3>
    <div id="receiptInfo"></div>
    <div id="cancelNotice" style="display:none;color:red;font-weight:bold;margin-top:10px;">‚ùå Order Cancelled</div>
    <button id="cancelOrderBtn" class="btn" style="background:#f44336;margin-top:10px;display:none;">Cancel Order</button>
    <button id="refundBtn" class="btn" style="background:#f57c00;margin-top:10px;">Request Refund</button>
    <div class="refund-form" id="refundForm">
      <input id="refundOrderId" readonly>
      <textarea id="refundReason" placeholder="Reason for refund..."></textarea>
      <select id="refundMode">
        <option value="">Refund Mode</option>
        <option>GCash</option><option>Bank</option><option>Store Credit</option>
      </select>
      <button id="submitRefund" class="btn" style="margin-top:8px;">Submit Refund</button>
      <div class="refund-confirm" id="refundConfirm">‚úÖ Refund request submitted!</div>
    </div>
    <button onclick="closeReceipt()" class="btn" style="margin-top:10px;background:#ccc;color:#111;">Close</button>
  </div>
</div>

<!-- Chat Assistant -->
<div class="chat-fab" id="chatFab">üí¨</div>
<div class="chat-panel" id="chatPanel">
  <div class="chat-header"><b>EcoAssist</b><button id="closeChat" class="btn" style="background:#eee;color:#111;padding:5px 8px;border-radius:8px;">Close</button></div>
  <div class="chat-body" id="chatBody"></div>
  <div class="chat-input">
    <input id="chatInput" placeholder="Ask EcoAssist..." style="flex:1;padding:10px;border:none;outline:none">
    <button id="chatSend" class="btn">Send</button>
  </div>
</div>

<script>
let cart=[],orders=[];
const cartList=document.getElementById('cartList'),cartTotal=document.getElementById('cartTotal');
const orderTable=document.querySelector("#orderHistory tbody");

function renderCart(){
  cartList.innerHTML='';
  let total=0;
  cart.forEach((c,i)=>{
    total+=c.price*c.qty;
    cartList.innerHTML+=`<li>${c.name} x${c.qty} ‚Ç±${c.price*c.qty} <button onclick='cart.splice(${i},1);renderCart()'>üóëÔ∏è</button></li>`;
  });
  cartTotal.textContent='Total: ‚Ç±'+total;
}

document.querySelectorAll('.add-to-cart').forEach(btn=>btn.onclick=()=>{
  const p=btn.parentElement;
  const name=p.dataset.name;
  const price=+p.dataset.price;
  const item=cart.find(x=>x.name==name);
  item?item.qty++:cart.push({name,price,qty:1});
  renderCart();
});

const receiptModal=document.getElementById('receiptModal'),receiptInfo=document.getElementById('receiptInfo');
const cancelOrderBtn=document.getElementById('cancelOrderBtn'),cancelNotice=document.getElementById('cancelNotice');
const refundBtn=document.getElementById('refundBtn'),refundForm=document.getElementById('refundForm'),refundConfirm=document.getElementById('refundConfirm');

document.getElementById('placeOrderBtn').onclick=()=>{
  const n=document.getElementById('custName').value.trim(),a=document.getElementById('custAddress').value.trim(),p=document.getElementById('custPayment').value;
  if(!n||!a||!p||cart.length==0){alert('Complete checkout details');return;}
  const id='ECO'+Date.now().toString().slice(-5);
  receiptModal.style.display='flex';
  receiptInfo.innerHTML=`<p><b>Order ID:</b> ${id}</p><p><b>Name:</b> ${n}</p><p><b>Address:</b> ${a}</p><p><b>Payment:</b> ${p}</p>`;
  document.getElementById('refundOrderId').value=id;
  cancelNotice.style.display='none';
  cancelOrderBtn.style.display=(p==='Bank'||p==='Gcash')?'inline-block':'none';

  // Add to order history
  const orderTotal=cart.reduce((sum,i)=>sum+i.price*i.qty,0);
  orders.push({id,items:[...cart],total:orderTotal,payment:p,status:(p==='COD'?'Pending':'Paid')});
  renderOrders();

  cart=[];renderCart();
};

cancelOrderBtn.onclick=()=>{
  if(confirm('Cancel this confirmed order?')){
    cancelNotice.style.display='block';
    cancelOrderBtn.disabled=true;
    addAIMessage("EcoAssist: Your order has been successfully cancelled.");
  }
};

function renderOrders(){
  orderTable.innerHTML='';
  orders.forEach((o,i)=>{
    const items=o.items.map(x=>`${x.name} x${x.qty}`).join(', ');
    const action=(o.status==='Pending')?`<button onclick='markPaid(${i})' class='btn' style='background:#43a047'>Mark Paid</button>`:'';
    orderTable.innerHTML+=`<tr>
      <td>${o.id}</td>
      <td>${items}</td>
      <td>‚Ç±${o.total}</td>
      <td>${o.payment}</td>
      <td>${o.status}</td>
      <td>${action}</td>
    </tr>`;
  });
}

function markPaid(i){
  orders[i].status='Paid';
  renderOrders();
  addAIMessage(`EcoAssist: Order ${orders[i].id} is now marked as Paid.`);
}

function closeReceipt(){receiptModal.style.display='none';}

// Refund logic
refundBtn.onclick=()=>refundForm.style.display=refundForm.style.display==='block'?'none':'block';
document.getElementById('submitRefund').onclick=()=>{
  const reason=document.getElementById('refundReason').value.trim(),mode=document.getElementById('refundMode').value;
  if(!reason||!mode){alert('Please fill out refund details');return;}
  refundConfirm.style.display='block';
  addAIMessage("EcoAssist: Your refund request has been received and is being processed. We'll contact you soon!");
  refundForm.querySelectorAll('input,textarea,select,button').forEach(e=>e.disabled=true);
};

// Payment options
const custPayment=document.getElementById('custPayment');
const paymentDetails=document.getElementById('paymentDetails');
custPayment.onchange=()=>{
  const choice=custPayment.value;
  paymentDetails.innerHTML='';
  if(choice==='Gcash'){
    paymentDetails.innerHTML=`<label><b>Enter GCash Number:</b></label>
    <input id="gcashNumber" placeholder="Enter your GCash number">`;
  }
  else if(choice==='Bank'){
    paymentDetails.innerHTML=`
      <label><b>Select Bank:</b></label>
      <select id="bankName" style="width:100%;padding:10px;border-radius:10px;border:1px solid #d9d9d9;margin-top:8px">
        <option value="">-- Choose Bank --</option>
        <option value="BDO">BDO</option>
        <option value="BPI">BPI</option>
        <option value="Metrobank">Metrobank</option>
      </select>
      <label style="margin-top:10px;display:block;"><b>Enter Account Number:</b></label>
      <input id="bankAccountNumber" placeholder="Enter your account number" style="width:100%;padding:10px;border-radius:10px;border:1px solid #d9d9d9;margin-top:8px">
    `;
  }
};

// AI Chat
const chatFab=document.getElementById('chatFab'),chatPanel=document.getElementById('chatPanel'),chatSend=document.getElementById('chatSend'),chatInput=document.getElementById('chatInput'),chatBody=document.getElementById('chatBody');
chatFab.onclick=()=>chatPanel.style.display='flex';
document.getElementById('closeChat').onclick=()=>chatPanel.style.display='none';
chatSend.onclick=()=>{const t=chatInput.value.trim();if(!t)return;addUserMessage(t);chatInput.value='';setTimeout(()=>smartReply(t),500);};
function addUserMessage(t){chatBody.innerHTML+=`<div class='bubble user'>${t}</div>`;chatBody.scrollTop=chatBody.scrollHeight;}
function addAIMessage(t){chatPanel.style.display='flex';chatBody.innerHTML+=`<div class='bubble ai'>${t}</div>`;chatBody.scrollTop=chatBody.scrollHeight;}
function smartReply(msg){
  msg=msg.toLowerCase();
  let reply="I'm EcoAssist! How can I help with your EcoFix order?";
  if(msg.includes("price")||msg.includes("cost"))reply="Our bamboo reinforcement is ‚Ç±250, coconut fiber board ‚Ç±300, fly ash concrete ‚Ç±220, and recycled aggregates ‚Ç±180.";
  else if(msg.includes("refund"))reply="You can request a refund right after checkout under your receipt. We'll confirm it within 24 hours.";
  else if(msg.includes("delivery"))reply="Orders are usually delivered within 3‚Äì5 business days.";
  else if(msg.includes("hello")||msg.includes("hi"))reply="Hi there üëã I'm EcoAssist, your green materials assistant!";
  else if(msg.includes("payment"))reply="We accept GCash, Bank Transfer, and COD.";
  addAIMessage(reply);
}
</script>
</body>
</html>
